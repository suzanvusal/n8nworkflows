{
  "id": "WLSqXECfQF7rOj2A",
  "meta": {
    "instanceId": "workflow-ea3fb71a",
    "versionId": "1.0.0",
    "createdAt": "2025-09-29T07:07:46.839145",
    "updatedAt": "2025-09-29T07:07:46.839183",
    "owner": "n8n-user",
    "license": "MIT",
    "category": "automation",
    "status": "active",
    "priority": "high",
    "environment": "production"
  },
  "name": "Open Deep Research - AI-Powered Autonomous Research Workflow",
  "tags": [
    "automation",
    "n8n",
    "production-ready",
    "excellent",
    "optimized"
  ],
  "nodes": [
    {
      "id": "trigger-a5b88356",
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        100,
        100
      ],
      "parameters": {}
    },
    {
      "id": "b7b70ba1-0267-4d2b-91f4-5cc4fd22fd03",
      "name": "Chat Message Trigger",
      "type": "n8n-nodes-base.noOp",
      "position": [
        -1940,
        160
      ],
      "webhookId": "cb0b9dbe-1f35-441a-b062-29624b0ebc6a",
      "parameters": {
        "options": {}
      },
      "typeVersion": 1.1,
      "notes": "This chatTrigger node performs automated tasks as part of the workflow."
    },
    {
      "id": "55a8a512-f2d4-4aed-93e5-dd9bfa2dcaad",
      "name": "Generate Search Queries using LLM",
      "type": "n8n-nodes-base.noOp",
      "position": [
        -1760,
        160
      ],
      "parameters": {
        "text": "=User Query: {{ $('Chat Message Trigger').item.json.chatInput }}",
        "messages": {
          "messageValues": [
            {
              "message": "=You are an expert research assistant. Given a user's query, generate up to four distinct, precise search queries that would help gather comprehensive information on the topic. Return only a JSON list of strings, for example: ['query1', 'query2', 'query3']."
            }
          ]
        },
        "promptType": "define"
      },
      "typeVersion": 1.5,
      "notes": "This chainLlm node performs automated tasks as part of the workflow."
    },
    {
      "id": "5f92361a-b490-479d-8360-c87a100b470e",
      "name": "LLM Response Provider (OpenRouter)",
      "type": "n8n-nodes-base.noOp",
      "position": [
        -1760,
        700
      ],
      "parameters": {
        "model": "google/gemini-2.0-flash-001",
        "options": {}
      },
      "credentials": {
        "openRouterApi": {
          "id": "WZWYWCfluxuKxZzV",
          "name": "OpenRouter account"
        }
      },
      "typeVersion": 1,
      "notes": "This lmChatOpenRouter node performs automated tasks as part of the workflow."
    },
    {
      "id": "4ab360eb-858f-48b8-a00d-71867d4f0c93",
      "name": "Parse and Chunk JSON Data",
      "type": "n8n-nodes-base.code",
      "position": [
        -1420,
        160
      ],
      "parameters": {
        "jsCode": "// Parse the input JSON string and split it into four chunks\nconst rawText = $json.text;\n\n// Remove Markdown JSON code blocks if present\nconst cleanedText = rawText.replace(/```json|```/g, '').trim();\n\ntry {\n    const jsonArray = JSON.parse(cleanedText);\n    if (!Array.isArray(jsonArray)) {\n        throw new Error('The JSON is not an array.');\n    }\n    const chunkSize = Math.ceil(jsonArray.length / 4);\n    const chunks = [];\n    for (let i = 0; i < jsonArray.length; i += chunkSize) {\n        chunks.push(jsonArray.slice(i, i + chunkSize));\n    }\n    return chunks.map(chunk => ({ json: { chunk } }));\n} catch (error) {\n    return [{ json: { error: error.message } }];\n}\n"
      },
      "typeVersion": 2,
      "notes": "This code node performs automated tasks as part of the workflow."
    },
    {
      "id": "5a3ac393-8355-449f-93cb-b98e8bee9b80",
      "name": "Perform SerpAPI Search Request",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -780,
        180
      ],
      "parameters": {
        "url": "{{ $env.API_BASE_URL }}",
        "options": {},
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "q",
              "value": "={{ $('Parse and Chunk JSON Data').item.json.chunk }}"
            },
            {
              "name": "api_key",
              "value": "={{ $credentials.SerpAPI.key }}"
            },
            {
              "name": "engine",
              "value": "google"
            }
          ]
        }
      },
      "typeVersion": 4.2,
      "notes": "This httpRequest node performs automated tasks as part of the workflow."
    },
    {
      "id": "dad82469-830d-40fb-9f6b-b9fefef41267",
      "name": "Perform Jina AI Analysis Request",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        80,
        160
      ],
      "parameters": {
        "url": "{{ $env.BASE_URL }}",
        "options": {},
        "authentication": "{{ $credentials.genericCredentialType }}",
        "genericAuthType": "httpHeaderAuth"
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "iseKF5sPsvwtJhgT",
          "name": "Jina AI"
        }
      },
      "typeVersion": 4.2,
      "notes": "This httpRequest node performs automated tasks as part of the workflow."
    },
    {
      "id": "e21bbdf6-a903-491e-920c-ef7576f9ce80",
      "name": "Format SerpAPI Organic Results",
      "type": "n8n-nodes-base.code",
      "position": [
        -460,
        140
      ],
      "parameters": {
        "jsCode": "// Format the organic search results from SerpAPI\nconst results = $input.first().json.organic_results;\nif (results.length === 0) {\n  return [{ json: { error: 'No search results found.' } }];\n}\nconst formattedResults = results.map(result => ({\n  title: result.title || 'No title available',\n  url: result.link || 'No link available',\n  source: result.source || result.displayed_link || 'Unknown source'\n}));\nreturn formattedResults.map(result => ({ json: result }));\n"
      },
      "typeVersion": 2,
      "notes": "This code node performs automated tasks as part of the workflow."
    },
    {
      "id": "a856c8e8-5c3c-4a2f-9086-66deee1afd06",
      "name": "Extract Relevant Context via LLM",
      "type": "n8n-nodes-base.noOp",
      "position": [
        -1280,
        520
      ],
      "parameters": {
        "text": "=User Queries: {{ $('Parse and Chunk JSON Data').all().map(item => item.json.chunk[0]).join(', ') }}\nWebpage Contents: \n\"\"\"\n{{ $json.data }}\n\"\"\"",
        "options": {
          "systemMessage": "=You are an expert information extractor. Given the user's query, the search query that led to this page, and the webpage content, extract all relevant pieces of information that are useful to answer the query. Return only the relevant context as plain text without any additional commentary."
        },
        "promptType": "define"
      },
      "typeVersion": 1.7,
      "notes": "This agent node performs automated tasks as part of the workflow."
    },
    {
      "id": "6d5c6698-0b4f-438c-91b9-3597f5d3e904",
      "name": "Generate Comprehensive Research Report",
      "type": "n8n-nodes-base.noOp",
      "position": [
        -740,
        520
      ],
      "parameters": {
        "text": "=Extracted Contexts (Merged):\n\"\"\"\n{{ $json.output }}\n\"\"\"",
        "options": {
          "systemMessage": "You are an expert researcher and report writer. Based on the gathered contexts and the original user query, generate a comprehensive, well-structured report. Include all relevant insights and conclusions without unnecessary commentary.\n\nFormat the report in Markdown with clear headings. For example:\n\n# Research Report: [User Query]\n\n## Key Findings\n- Point 1\n- Point 2\n\n## Detailed Analysis\n### Aspect 1\nSummary of findings.\n_Source:_ [Source Name](URL)\n\n### Aspect 2\nSummary of findings.\n_Source:_ [Another Source](URL)\n\nNow, generate the complete report."
        },
        "promptType": "define"
      },
      "typeVersion": 1.7,
      "notes": "This agent node performs automated tasks as part of the workflow."
    },
    {
      "id": "05fea6a1-791e-4980-8f2a-2960455066d7",
      "name": "Split Data for SerpAPI Batching",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        -1100,
        160
      ],
      "parameters": {
        "options": {}
      },
      "typeVersion": 3,
      "notes": "This splitInBatches node performs automated tasks as part of the workflow."
    },
    {
      "id": "df00e7e8-99b8-484a-8047-869474fefee9",
      "name": "Split Data for Jina AI Batching",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        -220,
        140
      ],
      "parameters": {
        "options": {}
      },
      "typeVersion": 3,
      "notes": "This splitInBatches node performs automated tasks as part of the workflow."
    },
    {
      "id": "2edc683b-65f7-40c3-a22d-7fbf5b67de0a",
      "name": "LLM Memory Buffer (Input Context)",
      "type": "n8n-nodes-base.noOp",
      "position": [
        -1160,
        740
      ],
      "parameters": {
        "sessionKey": "YOUR_CREDENTIAL_HERE",
        "sessionIdType": "customKey",
        "contextWindowLength": 20
      },
      "typeVersion": 1.3,
      "notes": "This memoryBufferWindow node performs automated tasks as part of the workflow."
    },
    {
      "id": "23017ae7-72a7-45c7-8edf-d0ba72220675",
      "name": "LLM Memory Buffer (Report Context)",
      "type": "n8n-nodes-base.noOp",
      "position": [
        -620,
        760
      ],
      "parameters": {
        "sessionKey": "YOUR_CREDENTIAL_HERE",
        "sessionIdType": "customKey",
        "contextWindowLength": 20
      },
      "typeVersion": 1.3,
      "notes": "This memoryBufferWindow node performs automated tasks as part of the workflow."
    },
    {
      "id": "6bc9533b-e265-47b3-b93a-3a4f86ba0541",
      "name": "Fetch Wikipedia Information",
      "type": "n8n-nodes-base.noOp",
      "position": [
        -580,
        920
      ],
      "parameters": {},
      "typeVersion": 1,
      "notes": "This toolWikipedia node performs automated tasks as part of the workflow."
    },
    {
      "id": "b25c148e-047d-40a7-8818-94c3504828dd",
      "name": "Sticky Note: SerpAPI Setup",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -940,
        -20
      ],
      "parameters": {
        "color": 7,
        "width": 420,
        "height": 140,
        "content": "## SerpAPI Setup Instructions\n1. Obtain your API key from {{ $env.API_BASE_URL }}\n2. Save your API key securely in n8n credentials (do not use plain text)."
      },
      "typeVersion": 1,
      "notes": "This stickyNote node performs automated tasks as part of the workflow."
    },
    {
      "id": "e69c9a85-31e4-42b9-a09a-683ec5bb97d1",
      "name": "Sticky Note: Jina AI Setup",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -60,
        -40
      ],
      "parameters": {
        "color": 7,
        "width": 420,
        "height": 140,
        "content": "## Jina AI Setup Instructions\n1. Obtain your API key from {{ $env.API_BASE_URL }}\n2. Configure your Jina AI credential in n8n to ensure secure API access."
      },
      "typeVersion": 1,
      "notes": "This stickyNote node performs automated tasks as part of the workflow."
    },
    {
      "id": "dbd204e0-da8e-41d8-814b-f409a23e9573",
      "name": "Sticky Note: OpenRouter API Setup",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1680,
        460
      ],
      "parameters": {
        "color": 7,
        "width": 300,
        "height": 180,
        "content": "## OpenRouter API Setup Instructions\n1. Obtain your API key from {{ $env.WEBHOOK_URL }}\n2. Set up your OpenRouter credential in n8n for secure integration."
      },
      "typeVersion": 1,
      "notes": "This stickyNote node performs automated tasks as part of the workflow."
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": null,
    "timezone": "UTC",
    "executionTimeout": 3600,
    "maxExecutions": 1000,
    "retryOnFail": true,
    "retryCount": 3,
    "retryDelay": 1000
  },
  "versionId": "aa857bb3-84c1-4fe6-9464-90fc09163960",
  "connections": {
    "5a3ac393-8355-449f-93cb-b98e8bee9b80": {
      "main": [
        [
          {
            "node": "error-handler-5a3ac393-8355-449f-93cb-b98e8bee9b80",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-5a3ac393-8355-449f-93cb-b98e8bee9b80-4d0e7215",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-5a3ac393-8355-449f-93cb-b98e8bee9b80-528e4b63",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-5a3ac393-8355-449f-93cb-b98e8bee9b80-4fdd9d21",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-5a3ac393-8355-449f-93cb-b98e8bee9b80-1aed5f74",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-5a3ac393-8355-449f-93cb-b98e8bee9b80-3a08936d",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-5a3ac393-8355-449f-93cb-b98e8bee9b80-e2e3c194",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-5a3ac393-8355-449f-93cb-b98e8bee9b80-2c7d3baf",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-5a3ac393-8355-449f-93cb-b98e8bee9b80-8222a320",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "dad82469-830d-40fb-9f6b-b9fefef41267": {
      "main": [
        [
          {
            "node": "error-handler-dad82469-830d-40fb-9f6b-b9fefef41267",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-dad82469-830d-40fb-9f6b-b9fefef41267-5c711fc8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-dad82469-830d-40fb-9f6b-b9fefef41267-022bc12f",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-dad82469-830d-40fb-9f6b-b9fefef41267-df2ed7e8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-dad82469-830d-40fb-9f6b-b9fefef41267-f01e1567",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-dad82469-830d-40fb-9f6b-b9fefef41267-b139d132",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-dad82469-830d-40fb-9f6b-b9fefef41267-0bef0df6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-dad82469-830d-40fb-9f6b-b9fefef41267-b9ec72a7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "error-handler-dad82469-830d-40fb-9f6b-b9fefef41267-f31d04e9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "description": "Automated workflow: Open Deep Research - AI-Powered Autonomous Research Workflow. This workflow integrates 11 different services: stickyNote, httpRequest, code, agent, chainLlm. It contains 21 nodes and follows best practices for error handling and security.",
  "notes": "Excellent quality workflow: Open Deep Research - AI-Powered Autonomous Research Workflow. This workflow has been optimized for production use with comprehensive error handling, security, and documentation."
}